<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<title>盖层控件 - 前端实例</title>
<link href="../../css/template.css" rel="stylesheet" type="text/css"/>
<style type="text/css">
	.m-cmp{background-color:#ddd;opacity:0.75;filter:alpha(opacity=75)}
	.m-cmp .msg{margin:200px auto;width:200px;height:50px;line-height:50px;font-size:14px;background-color:#fff;border-radius:3px;}
</style>
</head>
<body>
<div class="g-doc">
	<div class="g-hd">
        <h1 class="m-logo">网易-杭研院-前端技术组-实例库</h1>
        <h2 class="m-title">盖层控件</h2>
    </div>
    <div class="g-bd">
    	<div class="g-mn">
        </div>
        <div class="g-sd" id="side">
        	<form class="w-form" onsubmit="return false;" name="param">
    			<h2>PARAM</h2>
				<div>内容：<input class="w-txt w-txt-1" value="<div class='msg'>我是盖层，点击<a href='javascript:t.u._$hideMask();'>隐藏</a></div>" name="content"/></div>
				<div><input type="button" class="w-btn" name="update" value="更新"/></div>
        	</form>
			<form class="w-form" onsubmit="return false;" name="api">
    			<h2>API</h2>
				<div><input type="button" class="w-btn" value="显示盖层" name="show"/></div>
        	</form>
		</div>
    </div>
</div>
<div class="g-bd">
    <div class="m-foot">
    	如有任何问题，请联系：魏文庆(<a href="mailto:wqwei@corp.netease.com">wqwei@corp.netease.com</a>)
    </div>
</div>
<div class="g-ft">
    <div class="m-foot">
    	&nbsp;&copy;&nbsp;网易-杭研院-前端技术组
    </div>
</div>
<script src="../../../src/define.js?pro=../../"></script>
<script>
	var f = function(){
		var _ = NEJ.P;
		var e = _('nej.e');
		var v = _('nej.v');
		var i = _('nej.ui');
		var u = _('nej.u')
		var tu = _('t.u')
		var ut = _('nej.ut');
		var paramForm, cmp;
		/**
		 * 更新控件
		 */
		function update(){
			 i._$$Mask._$recycle(cmp);
			 var _data = paramForm._$getData();
			 cmp = i._$$Mask._$allocate({
					parent: document.body,
					clazz: 'm-cmp',
					content: _data.content
				});
		}
		/**
		 * 显示控件
		 */
		function show(){
			cmp&&cmp._$show();
		}
		/**
		 * 点击隐藏盖层的响应函数
		 */
		function hide(){
			cmp&&cmp._$hide();
		}
		/**
		 * 页面初始化函数
		 */
		function init(){
			paramForm = tu.form._$getInstance('param');
			apiForm = tu.form._$getInstance('api');
			paramForm._$focus();
			v._$addEvent(paramForm._$get('update'), 'click', function(_event){
				update();
			});
			v._$addEvent(apiForm._$get('show'), 'click', function(){
				show();
			});
			v._$addEvent(apiForm._$get('hide'), 'click', function(){
				hide();
			});
			update();
			tu._$hideMask = hide;
		}
		init();
	};
	define(['{lib}base/event.js', '{pro}js/extend.js', '{pro}js/form.js', '{lib}ui/mask/mask.js'], f);
</script>
</body>
</html>